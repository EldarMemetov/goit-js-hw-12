{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api';\nconst KEY = '43475278-2a58784aecd56e70c750f20e8';\n\nexport async function searchFormImg(search, page = 1, perPage = 15) {\n  const params = {\n    key: KEY,\n    q: search,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: perPage,\n  };\n\n  try {\n    const response = await axios.get(`${BASE_URL}/`, { params });\n    return response.data.hits;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { scroll } from 'smooth-scroll';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function showLoader(loaderContainer) {\n  loaderContainer.style.display = 'block';\n}\n\nexport function hideLoader(loaderContainer) {\n  loaderContainer.style.display = 'none';\n}\n\nexport function createMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n<li class=\"gallery-item\">\n  <a class=\"gallery-link\" href=\"${largeImageURL}\">\n    <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" width=\"360\" height=\"240\" />\n    <ul class=\"property-list\">\n      <li class=\"property-item\">\n        <p class=\"property-title\">Likes</p>\n        <p class=\"property-value\">${likes}</p>\n      </li>\n      <li class=\"property-item\">\n        <p class=\"property-title\">Views</p>\n        <p class=\"property-value\">${views}</p>\n      </li>\n      <li class=\"property-item\">\n        <p class=\"property-title\">Comments</p>\n        <p class=\"property-value\">${comments}</p>\n      </li>\n      <li class=\"property-item\">\n        <p class=\"property-title\">Downloads</p>\n        <p class=\"property-value\">${downloads}</p>\n      </li>\n    </ul>  \n  </a>\n</li>\n\n  `;\n}\n\nexport function clearImagesGallery(ulGroup) {\n  ulGroup.innerHTML = '';\n}\n\nexport function searchError() {\n  iziToast.error({\n    title: 'Error',\n    message:\n      'Sorry, there was an error processing your request. Please try again later.',\n    position: 'topRight',\n  });\n}\n\nexport function initializeLightbox() {\n  return new SimpleLightbox('.gallery-item a', {\n    captionsData: 'alt',\n    captionPosition: 'bottom',\n    captionDelay: 250,\n  });\n}\n\nexport function searchInfo() {\n  iziToast.info({\n    title: 'info',\n    position: 'topRight',\n    message: \"We're sorry, but you've reached the end of search results.\",\n  });\n}\n","// main.js\nimport { searchFormImg } from './js/pixabay-api.js';\nimport {\n  showLoader,\n  hideLoader,\n  createMarkup,\n  clearImagesGallery,\n  searchError,\n  initializeLightbox,\n  searchInfo,\n} from './js/render-functions.js';\n\nconst loaderContainer = document.querySelector('.loader-container');\nconst form = document.getElementById('form');\nconst ulGroup = document.querySelector('.ul-group');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst backToTopBtn = document.querySelector('.back-to-top-btn');\n\nform.addEventListener('submit', handleSearch);\nloadMoreBtn.style.display = 'none';\nbackToTopBtn.style.display = 'none';\nlet page = 1;\nlet currentQuery = '';\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  showLoader(loaderContainer);\n\n  clearImagesGallery(ulGroup);\n  page = 1;\n  const inputForm = form.elements.img.value.trim();\n  currentQuery = inputForm;\n  try {\n    const images = await searchFormImg(inputForm, page, 15);\n    if (images.length === 0) {\n      loadMoreBtn.style.display = 'none';\n      clearImagesGallery(ulGroup);\n      searchError();\n    } else {\n      renderImages(images);\n      if (images.length < 15) {\n        loadMoreBtn.style.display = 'none';\n      } else {\n        loadMoreBtn.style.display = 'block';\n      }\n    }\n  } catch (error) {\n    console.error(error);\n    searchError();\n  } finally {\n    hideLoader(loaderContainer);\n    form.reset();\n  }\n}\n\nfunction renderImages(images) {\n  images.forEach(image => {\n    const markup = createMarkup(image);\n    ulGroup.insertAdjacentHTML('beforeend', markup);\n  });\n  const lightbox = initializeLightbox();\n  lightbox.refresh();\n}\n\nloadMoreBtn.addEventListener('click', clickNextSearch);\n\nasync function clickNextSearch() {\n  page++;\n\n  try {\n    const images = await searchFormImg(currentQuery, page);\n    if (images.length === 0) {\n      loadMoreBtn.style.display = 'none';\n      searchInfo();\n    } else {\n      renderImages(images);\n      if (images.length < 15) {\n        loadMoreBtn.style.display = 'none';\n        searchInfo();\n      }\n      const cardHeight = ulGroup\n        .querySelector('.gallery-item')\n        .getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (error) {\n    console.error(error);\n    searchError();\n  }\n}\n\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > window.innerHeight) {\n    backToTopBtn.style.display = 'block';\n  } else {\n    backToTopBtn.style.display = 'none';\n  }\n});\n\nbackToTopBtn.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n"],"names":["BASE_URL","KEY","searchFormImg","search","page","perPage","params","axios","error","showLoader","loaderContainer","hideLoader","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearImagesGallery","ulGroup","searchError","iziToast","initializeLightbox","SimpleLightbox","searchInfo","form","loadMoreBtn","backToTopBtn","handleSearch","currentQuery","event","inputForm","images","renderImages","image","markup","clickNextSearch","cardHeight"],"mappings":"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"}